{"pageProps":{"frontmatter":{},"headings":[{"depth":2,"value":"1. firebase credentials 등록"},{"depth":2,"value":"2. 수신된 Remote Message Handling"},{"depth":2,"value":"3. Missed count Handling"},{"depth":3,"value":"missedCount 업데이트 시점"}],"body":{"compiledSource":"var u=Object.defineProperty,l=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var p=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,s=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&p(e,a,t[a]);if(n)for(var a of n(t))r.call(t,a)&&p(e,a,t[a]);return e},c=(e,t)=>l(e,m(t));var d=(e,t)=>{var a={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&n)for(var o of n(e))t.indexOf(o)<0&&r.call(e,o)&&(a[o]=e[o]);return a};const makeShortcode=e=>function(a){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",s({},a))},InfoBlock=makeShortcode(\"InfoBlock\"),NextBlock=makeShortcode(\"NextBlock\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(a){var o=a,{components:e}=o,t=d(o,[\"components\"]);return mdx(MDXLayout,c(s(s({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h1\",null,\"Push Notifications and Missed count badge\"),mdx(\"h2\",null,\"1. firebase credentials \\uB4F1\\uB85D\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"ChattyCloud\\uC5D0\\uC11C \\uC0C8 \\uBA54\\uC138\\uC9C0\\uC5D0 \\uB300\\uD55C push notification\\uC744 \\uC790\\uB3D9\\uC73C\\uB85C \\uBC1C\\uC1A1\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 \\uB300\\uC2DC\\uBCF4\\uB4DC\\uC5D0\\uC11C firebase credential\\uC744 \\uB4F1\\uB85D\\uD574\\uC57C\\uD569\\uB2C8\\uB2E4.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",s({parentName:\"li\"},{href:\"https://console.firebase.google.com\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"firebase console\")),\" \\uC5D0 \\uC5F0\\uACB0 \\u2192 project settings \\u2192 service accounts \\u2192 generate a new private key \\u2192 \\uC5EC\\uAE30\\uC11C \\uC0DD\\uC131\\uB41C \\uCE74\\uB97C \\uB2E4\\uC6B4\\uB85C\\uB4DC\\uD55C\\uB2E4.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",s({parentName:\"li\"},{href:\"https://dashboard.chatty-cloud.com/apps\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"\\uB300\\uC2DC\\uBCF4\\uB4DC\\uC758 App \\uBA54\\uB274\")),\" \\uC5D0\\uC11C \\uB2E4\\uC6B4\\uBC1B\\uC740 credential \\uD0A4\\uB97C \\uB4F1\\uB85D\\uD55C\\uB2E4. (\\uCCA8\\uBD80 \\uC2A4\\uD06C\\uB9B0\\uC0F7 \\uCC38\\uC870)\"),mdx(\"li\",{parentName:\"ul\"},\"\\uB4F1\\uB85D\\uC774 \\uC644\\uB8CC\\uB418\\uBA74 \\uCF54\\uB4DC\\uC791\\uC131\\uC5C6\\uC774 \\uC790\\uB3D9\\uC73C\\uB85C \\uC0C8\\uBA54\\uC138\\uC9C0\\uC5D0 \\uB300\\uD55C push notification\\uC744 \\uBC1B\\uC744\\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\")),mdx(\"p\",null,mdx(\"img\",s({parentName:\"p\"},{src:\"/img/docs/dashboard-fcm-credentials.png\",alt:\"dashboard-firebase-credentials\"}))),mdx(InfoBlock,{type:\"warning\",mdxType:\"InfoBlock\"},\"\\uB9CC\\uC57D push notification\\uC774 \\uC218\\uC2E0\\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4\\uBA74 init \\uD568\\uC218\\uB97C \\uD638\\uCD9C\\uC2DC\\uC5D0 deviceToken\\uC5D0 \\uAC12\\uC774 \\uC788\\uB294\\uC9C0 \\uD655\\uC778\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\"),mdx(\"h2\",null,\"2. \\uC218\\uC2E0\\uB41C Remote Message Handling\"),mdx(\"p\",null,\"Below code is a part of App.tsx\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-typescript\"}),`App.tsx\n\n...\n\nReact.useEffect(() => {\n  // Receiving when Foreground State\n  const unsubscribe = messaging().onMessage((message: FirebaseMessagingTypes.RemoteMessage) => {\n    console.debug('Receiving Notification Message:', message);\n    /*\n     * Remote meesage type\n      message = {\n        title: string, // sender member name\n        body: string, // text message\n        data: {\n          type: 'CHATTY_USER_MESSAGE' | 'CHATTY_ADMIN_MESSAGE' | 'CHATTY_SYSTEM_MESSAGE',\n          ChatId: string, // chat id\n          missedCount: {\n            total: number,\n            group: Array<{name: string, count: number}>\n          },\n        }\n      }\n     */\n\n    const activeScreen = navigation.getCurrentRoute().name;\n    if (activeScreen !== 'Chat') {\n      if (message.notification) {\n        displayNotification({\n          title: message.notification.title,\n          body: message.notification.body,\n          data: message.data,\n        });\n      }\n    }\n\n    // store missedCount to global redux state\n    dispatch(setChat({ missedCount: JSON.parse(message.data.missedCount) }));\n    \n  });\n});\n\n...\n\n`)),mdx(\"h2\",null,\"3. Missed count Handling\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"redux state\\uB97C \\uC0AC\\uC6A9\\uD558\\uC5EC missedCount\\uB97C \\uCD5C\\uC2E0\\uC73C\\uB85C \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uACE0 \\uD544\\uC694\\uD55C\\uACF3\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uC790\"),mdx(\"li\",{parentName:\"ul\"},\"\\uC544\\uB798 4\\uAC00\\uC9C0\\uC758 \\uACBD\\uC6B0\\uC5D0 redux\\uC758 missedCount\\uB97C \\uC5C5\\uB370\\uC774\\uD2B8 \\uD574\\uC57C\\uD569\\uB2C8\\uB2E4.\")),mdx(\"h3\",null,\"missedCount \\uC5C5\\uB370\\uC774\\uD2B8 \\uC2DC\\uC810\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Chatty.init() \\uAC00 \\uC131\\uACF5\\uC801\\uC73C\\uB85C \\uB05D\\uB0AC\\uC744\\uB54C (init \\uC774 \\uC131\\uACF5\\uC801\\uC774\\uBA74 missedCount\\uAC00 return \\uB41C\\uB2E4)\"),mdx(\"li\",{parentName:\"ul\"},\"\\uC0C8\\uB85C\\uC6B4 \\uBA54\\uC138\\uC9C0 notification \\uC774 \\uC218\\uC2E0\\uB418\\uC5C8\\uC744\\uB54C (remote message\\uC758 data\\uC5D0 missedCount\\uAC00 \\uB4E4\\uC5B4\\uC788\\uB2E4)\"),mdx(\"li\",{parentName:\"ul\"},\"AppState\\uAC00 \\uBCC0\\uACBD\\uB420\\uB54C (AppState\\uAC00 foreground\\uC0C1\\uD0DC\\uAC00 \\uB418\\uBA74 Chatty.getMissedCount()\\uB97C \\uD638\\uCD9C\\uD574\\uC57C\\uD55C\\uB2E4)\"),mdx(\"li\",{parentName:\"ul\"},\"\\uCC44\\uD305\\uD654\\uBA74\\uC5D0\\uC11C \\uB098\\uAC08\\uB54C (ChattyChat\\uC758 disconnect() \\uBA54\\uC18C\\uB4DC\\uAC00 \\uD638\\uCD9C\\uB420\\uB54C Chatty.getMissedCount()\\uB97C \\uD638\\uCD9C\\uD574\\uC57C\\uD55C\\uB2E4)\")),mdx(\"p\",null,\"Below type show MissedCountType. can be used as ChattyTypes.MissedCountType\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-typescript\"}),`Types.d.ts\n\n...\n\nexport interface MissedCountType {\n  total: number;\n  group: Array<{\n    name: string;\n    count: number;\n  }>;\n}\n\n...\n\n`)),mdx(\"p\",null,\"Below code is a part of ChatButton.tsx\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-typescript\"}),`ChatButton.tsx\n\nimport * as React from 'react';\nimport { View } from 'react-native';\n\nconst ChatButton = (props: ChatButtonProps) => {\n  // redux state\\uB97C \\uC0AC\\uC6A9\\uD558\\uC5EC missedCount\\uB97C \\uCD5C\\uC2E0\\uC73C\\uB85C \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uACE0 \\uD544\\uC694\\uD55C\\uACF3\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uC790\n  // \\uC544\\uB798 4\\uAC00\\uC9C0\\uC758 \\uACBD\\uC6B0\\uC5D0 redux\\uC758 badge count\\uB97C \\uC5C5\\uB370\\uC774\\uD2B8 \\uD574\\uC57C\\uD569\\uB2C8\\uB2E4.\n  // 1. Chatty.init() \\uAC00 \\uC131\\uACF5\\uC801\\uC73C\\uB85C \\uB05D\\uB0AC\\uC744\\uB54C (init \\uC774 \\uC131\\uACF5\\uC801\\uC774\\uBA74 missedCount\\uAC00 return \\uB41C\\uB2E4)\n  // 2. \\uC0C8\\uB85C\\uC6B4 \\uBA54\\uC138\\uC9C0 notification \\uC774 \\uC218\\uC2E0\\uB418\\uC5C8\\uC744\\uB54C (remote message\\uC758 data\\uC5D0 missedCount\\uAC00 \\uB4E4\\uC5B4\\uC788\\uB2E4)\n  // 3. AppState\\uAC00 \\uBCC0\\uACBD\\uB420\\uB54C (AppState\\uAC00 foreground\\uC0C1\\uD0DC\\uAC00 \\uB418\\uBA74 Chatty.getMissedCount()\\uB97C \\uD638\\uCD9C\\uD574\\uC57C\\uD55C\\uB2E4)\n  // 4. \\uCC44\\uD305\\uD654\\uBA74\\uC5D0\\uC11C \\uB098\\uAC08\\uB54C (ChattyChat\\uC758 disconnect() \\uBA54\\uC18C\\uB4DC\\uAC00 \\uD638\\uCD9C\\uB420\\uB54C Chatty.getMissedCount()\\uB97C \\uD638\\uCD9C\\uD574\\uC57C\\uD55C\\uB2E4)\n  const chat = useChat();   // use redux store state\n\n  return (\n    <View>\n      /* Button UI components*/\n      /* Use chat.missedCount.total or chat.missedCount.group */\n    </View>\n  )\n}\n`)),mdx(NextBlock,{steps:[{text:\"Static Methods\",link:\"/reference/static-methods.ko\"}],mdxType:\"NextBlock\"}))}MDXContent.isMDXComponent=!0;\n","scope":{}},"fields":{"slug":"getting-started/push-notifications.ko","lastUpdatedOn":"2023-01-30T22:58:20+09:00"}},"__N_SSG":true}