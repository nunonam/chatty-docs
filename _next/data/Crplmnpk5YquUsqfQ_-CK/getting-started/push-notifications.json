{"pageProps":{"frontmatter":{"title":"Push Notifications and Missed count badge"},"headings":[{"depth":2,"value":"1. Register firebase credentials"},{"depth":2,"value":"2. Receiving remote message"},{"depth":2,"value":"3. How to show missed count badge"}],"body":{"compiledSource":"var g=Object.defineProperty,p=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var c=(e,t,o)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,s=(e,t)=>{for(var o in t||(t={}))r.call(t,o)&&c(e,o,t[o]);if(n)for(var o of n(t))i.call(t,o)&&c(e,o,t[o]);return e},d=(e,t)=>p(e,u(t));var m=(e,t)=>{var o={};for(var a in e)r.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&n)for(var a of n(e))t.indexOf(a)<0&&i.call(e,a)&&(o[a]=e[a]);return o};const makeShortcode=e=>function(o){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",s({},o))},InfoBlock=makeShortcode(\"InfoBlock\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var a=o,{components:e}=a,t=m(a,[\"components\"]);return mdx(MDXLayout,d(s(s({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"1. Register firebase credentials\"),mdx(\"p\",null,\"ChattyCloud need to register your firebase credential to send fcm messages to your chat members at dashboard\"),mdx(\"p\",null,\"That's it. now you can receive push notifications \"),mdx(\"p\",null,mdx(\"img\",s({parentName:\"p\"},{src:\"/img/docs/dashboard-fcm-credentials.png\",alt:\"dashboard-firebase-credentials\"}))),mdx(InfoBlock,{type:\"warning\",mdxType:\"InfoBlock\"},\"If remote message does not received, Check 'deviceToken' of the member is registered or not. It can be confirmed at your Chatty.init() method\"),mdx(\"h2\",null,\"2. Receiving remote message\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-typescript\"}),`\nRemoteMessageType = {\n  title: string,\n  body: string,\n  data: {\n    type: 'CHATTY_NEW_MESSAGE',\n    ChatId: 'ChatId',\n    missedCount: {\n      total: number,\n      group: Array<{name: string, count: number}>\n    },\n  }\n}\n\nReact.useEffect(() => {\n  const unsubscribe = messaging().onMessage((message: FirebaseMessagingTypes.RemoteMessage) => {\n    console.debug('Receiving Notification Message:', message);\n\n    const activeScreen = navigation.getCurrentRoute().name;\n    if (activeScreen !== 'Chat') {\n      if (message.notification) {\n        displayNotification({\n          title: message.notification.title,\n          body: message.notification.body,\n          data: message.data,\n        });\n      }\n    }\n\n    dispatch(setChat({ missedCount: JSON.parse(message.data.missedCount) }));\n    \n  });\n});\n`)),mdx(\"h2\",null,\"3. How to show missed count badge\"),mdx(\"pre\",null,mdx(\"code\",s({parentName:\"pre\"},{className:\"language-typescript\"}),`import Chatty from \"chatty-client\";\n\n/**\n * @returns {Promise<{total: number, group: Array<{name: string, count: number}>}>}\n */\nasync function getMissedCount() {\n  const data = await Chatty.getMissedCount();\n  return data;\n}\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{}},"fields":{"slug":"getting-started/push-notifications","lastUpdatedOn":"2022-08-13T03:54:08.156Z"}},"__N_SSG":true}